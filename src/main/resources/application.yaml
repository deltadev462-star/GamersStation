server:
  servlet:
    context-path: /api/v1

spring:
  application:
    name: gs-marketplace-api
  
  datasource:
    url: ${DB_URL:jdbc:mysql://localhost:3306/gamers_station_marketplace}
    username: ${DB_USERNAME:root}
    password: Aa@10203040
    driver-class-name: com.mysql.cj.jdbc.Driver
  
  jpa:
    hibernate:
      ddl-auto: validate
    open-in-view: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQL8Dialect
        jdbc:
          time_zone: UTC
  
  flyway:
    enabled: true
    baseline-on-migrate: true
    validate-on-migrate: false
    locations: classpath:db/migration
  
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 50MB
  
  profiles:
    active: ${SPRING_PROFILE:dev}

# JWT Configuration
jwt:
  secret: ${JWT_SECRET:U9f6TqB2sK7xL0pA8rE3wY5vN1cD4zG6hJ9mR2tU7xZ0pQ3bL8sF1vY4kT6aW9n}
  access-token-expiration: ${JWT_ACCESS_EXPIRATION:900000}      # 15 minutes in milliseconds
  refresh-token-expiration: ${JWT_REFRESH_EXPIRATION:604800000}  # 7 days in milliseconds
  issuer: ${JWT_ISSUER:gamers-station}

# OTP Configuration
otp:
  code-length: 4
  ttl-minutes: 5
  resend-cooldown-seconds: 60
  max-attempts-per-day: 5

# Media Configuration
media:
  storage:
    provider: s3
  max-images-per-ad: 10
  max-size-mb: 10

# AWS Configuration
aws:
  access-key-id: ${AWS_ACCESS_KEY_ID:}
  secret-access-key: ${AWS_SECRET_ACCESS_KEY:}
  s3:
    bucket-name: ${AWS_S3_BUCKET_NAME:gs-marketplace}
    region: ${AWS_S3_REGION:us-east-1}
  cloudfront:
    domain: ${AWS_CLOUDFRONT_DOMAIN:}

# Messaging Configuration
messaging:
  ably:
    api-key: ${ABLY_API_KEY:}
  websocket:
    allowed-origins: ${WEBSOCKET_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:5173}

# Rate Limiting
rate-limit:
  otp:
    per-ip: 10        # per minute
    per-phone: 5      # per minute
  api:
    default: 100      # per minute

# Pagination Defaults
pagination:
  default-page: 0
  default-size: 20
  max-size: 100

# Springdoc OpenAPI
springdoc:
  api-docs:
    path: /api-docs
  swagger-ui:
    path: /swagger-ui.html
    tags-sorter: alpha
    operations-sorter: alpha

# Internationalization
app:
  i18n:
    default-locale: ar
    supported-locales: en,ar
